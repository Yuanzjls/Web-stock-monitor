(this["webpackJsonpweek2-stock"]=this["webpackJsonpweek2-stock"]||[]).push([[0],{26:function(e,t,c){},27:function(e,t,c){},29:function(e,t,c){},51:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(20),r=c.n(a),i=(c(26),function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,52)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),r(e),i(e)}))}),s=c(9),o=c(10),l=c(3),u=(c(27),c(0));function d(e){var t=Object(n.useState)(""),c=Object(l.a)(t,2),a=c[0],r=c[1];return Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.addStock(a),r("")},children:[Object(u.jsx)("h2",{className:"label-wrapper",children:Object(u.jsx)("label",{htmlFor:"new-stock-input",className:"label__lg",children:"What stock do you want to add?"})}),Object(u.jsx)("input",{type:"text",placeholder:"Input a new stock",id:"new-stock-input",required:!0,className:"input input__lg",name:"text",autoComplete:"off",value:a,onChange:function(e){r(e.target.value)}}),Object(u.jsx)("button",{type:"submit",className:"btn btn__primary btn__lg",children:"Add"})]})}var p=c(21);c(29);function b(e){var t=Object(n.useState)(!1),c=Object(l.a)(t,2),a=c[0],r=c[1],i=Object(n.useState)(""),s=Object(l.a)(i,2),o=s[0],d=s[1],p=Object(n.useState)(!0),b=Object(l.a)(p,2),j=b[0],f=b[1],m=Object(n.useMemo)((function(){var t=e.priceInfo.priceCur-e.priceInfo.pricePre;return{priceChange:t,priceChangePercentage:Math.abs(t/e.priceInfo.pricePre*100)}}),[e.priceInfo.priceCur,e.priceInfo.pricePre]),h=m.priceChange,O=m.priceChangePercentage;var k=Object(u.jsxs)("form",{className:"stack-small",onSubmit:function(t){t.preventDefault(),e.editStock(e.id,o),d(""),r(!1)},children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{className:"stock-label",htmlFor:e.id,children:"Input a stock name:"}),Object(u.jsx)("input",{id:e.id,className:"stock-text",type:"text",value:o,onChange:function(e){d(e.target.value)}})]}),Object(u.jsxs)("div",{className:"btn-group",children:[Object(u.jsxs)("button",{type:"button",className:"btn stock-cancel",onClick:function(){r(!1)},children:["Cancel",Object(u.jsx)("span",{className:"visually-hidden",children:"Input a stock name:"})]}),Object(u.jsxs)("button",{type:"submit",className:"btn btn__primary stock-edit",children:["Save",Object(u.jsx)("span",{className:"visually-hidden",children:"Input a stock name:"})]})]})]}),x=Object(u.jsxs)("div",{className:"stack-small",onMouseOver:function(){f(!1)},onMouseOut:function(){f(!0)},children:[Object(u.jsx)("div",{className:"c-cb",children:Object(u.jsxs)("div",{className:"stock-container",children:[Object(u.jsx)("label",{className:"stock-label",htmlFor:e.id,children:e.name}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"stock-price",children:e.priceInfo.priceCur}),Object(u.jsx)("br",{}),Object(u.jsxs)("span",{className:"stock-price",style:{color:h>0?"green":"red"},children:[h>0?"+":"",Number(h).toFixed(2)," (",Number(O).toFixed(2),"%)",Object(u.jsx)("br",{})]})]})]})}),Object(u.jsxs)("div",{className:"btn-group",style:{visibility:j?"hidden":"visible"},children:[Object(u.jsxs)("button",{type:"button",className:"btn",onClick:function(){return r(!0)},children:["Edit ",Object(u.jsxs)("span",{className:"visually-hidden",children:[e.name," "]})]}),Object(u.jsxs)("button",{type:"button",className:"btn btn__danger",onClick:function(){e.deleteStock(e.id)},children:["Delete ",Object(u.jsx)("span",{className:"visually-hidden",children:e.name})]})]}),Object(u.jsx)("hr",{})]});return Object(u.jsx)("li",{className:"stock",children:a?k:x})}var j=c(4),f=c.n(j),m=c(8),h=c.n(m),O="c1433cn48v6s4a2e39q0",k="https://finnhub.io/api/v1/quote?symbol=";var x=function(e){var t=Object(n.useState)(e.stocks),c=Object(l.a)(t,2),a=c[0],r=c[1],i=Object(n.useState)(h()().format("LT")),j=Object(l.a)(i,2),m=j[0],x=j[1],v=a.map((function(e){return Object(u.jsx)(b,{id:e.id,name:e.name,deleteStock:y,editStock:S,priceInfo:e.priceInfo},e.id)})),g=1!==v.length?"stocks":"stock",N="".concat(v.length," ").concat(g);function C(e){r(e),x(h()().format("LT"))}function I(){var e=a.map((function(e){return{apiUrl:"".concat(k).concat(e.name,"&token=").concat(O)}})).map((function(e){return f()(e.apiUrl)}));f.a.all(e).then(f.a.spread((function(){for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];var n=a.map((function(e,c){return Object(o.a)(Object(o.a)({},e),{},{priceInfo:{pricePre:t[c].data.pc,priceCur:t[c].data.c}})}));C(n)}))).catch((function(e){console.log(e)}))}function y(e){var t=a.filter((function(t){return e!==t.id}));r(t)}function S(e,t){var c=encodeURI(t.toUpperCase().trim());if(a.map((function(e){return e.name})).includes(c))alert(c+" is already on the watch list");else{var n=Object(s.a)(a);a.forEach((function(a,i){e===a.id&&f.a.get("".concat(k).concat(c,"&token=").concat(O)).then((function(e){if(0!==e.data.t){var a={pricePre:e.data.pc,priceCur:e.data.c};n[i].name=c,n[i].priceInfo=a,r(n)}else alert(t+" does not exist")})).catch((function(e){console.log(e)}))}))}}return function(e,t){var c=Object(n.useRef)();Object(n.useEffect)((function(){c.current=e})),Object(n.useEffect)((function(){I();var e=setInterval((function(){c.current()}),t);return function(){return clearInterval(e)}}),[t])}((function(){I()}),6e4),Object(u.jsxs)("div",{className:"stockapp stack-large",children:[Object(u.jsx)("h1",{children:"Stock Prices"}),Object(u.jsxs)("p",{style:{textAlign:"center"},children:["Update at ",m]}),Object(u.jsx)(d,{addStock:function(e){var t=encodeURI(e.toUpperCase().trim());a.map((function(e){return e.name})).includes(t)?alert(t+" is already on the watch list"):f.a.get("".concat(k).concat(t,"&token=").concat(O)).then((function(e){var c={id:"stock-"+Object(p.a)(),name:t,priceInfo:{pricePre:e.data.pc,priceCur:e.data.c}};0!==e.data.t?r([].concat(Object(s.a)(a),[c])):alert("The "+t+" is not a stock symbol")})).catch((function(e){console.log(e)}))}}),Object(u.jsx)("div",{className:"filters btn-group stack-exception"}),Object(u.jsx)("h2",{id:"list-heading",tabIndex:"-1",children:N}),Object(u.jsx)("ul",{role:"list",className:"stock-list stack-large stack-exception",children:v})]})};r.a.render(Object(u.jsx)(x,{stocks:[{id:"stock-0",name:"STM",priceInfo:{pricePre:0,priceCur:0}},{id:"stock-1",name:"TXN",priceInfo:{pricePre:0,priceCur:0}},{id:"stock-2",name:"AMD",priceInfo:{pricePre:0,priceCur:0}},{id:"stock-3",name:"MSFT",priceInfo:{pricePre:0,priceCur:0}},{id:"stock-4",name:"INTC",priceInfo:{pricePre:0,priceCur:0}}]}),document.getElementById("root")),i()}},[[51,1,2]]]);
//# sourceMappingURL=main.963f8380.chunk.js.map