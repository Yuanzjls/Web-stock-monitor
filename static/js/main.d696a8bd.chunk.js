(this["webpackJsonpweek2-stock"]=this["webpackJsonpweek2-stock"]||[]).push([[0],{24:function(e,t,c){},49:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(18),r=c.n(a),s=(c(24),function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,50)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))}),o=c(7),i=c(8),l=c(3),u=c(0);function d(e){var t=Object(n.useState)(!1),c=Object(l.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)(""),o=Object(l.a)(s,2),i=o[0],d=o[1],b=Object(n.useState)(!0),j=Object(l.a)(b,2),p=j[0],f=j[1],m=Object(n.useRef)(null),O=Object(n.useRef)(null),h=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current}(a),x=e.priceInfo.priceCur-e.priceInfo.pricePre,v=Math.abs(x/e.priceInfo.pricePre*100);Object(n.useEffect)((function(){!h&&a&&m.current.focus(),h&&!a&&O.current.focus()}),[h,a]);var g=Object(u.jsxs)("form",{className:"stack-small",onSubmit:function(t){t.preventDefault(),e.editTask(e.id,i),d(""),r(!1)},ref:m,children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{className:"todo-label",htmlFor:e.id,children:"Input a stock name:"}),Object(u.jsx)("input",{id:e.id,className:"todo-text",type:"text",value:i,onChange:function(e){d(e.target.value)}})]}),Object(u.jsxs)("div",{className:"btn-group",children:[Object(u.jsxs)("button",{type:"button",className:"btn todo-cancel",onClick:function(){r(!1)},children:["Cancel",Object(u.jsx)("span",{className:"visually-hidden",children:"Input a stock name:"})]}),Object(u.jsxs)("button",{type:"submit",className:"btn btn__primary todo-edit",children:["Save",Object(u.jsx)("span",{className:"visually-hidden",children:"Input a stock name:"})]})]})]}),k=Object(u.jsxs)("div",{className:"stack-small",onMouseOver:function(){f(!1),console.log("Over")},onMouseOut:function(){f(!0),console.log("Out")},children:[Object(u.jsx)("div",{className:"c-cb",children:Object(u.jsxs)("div",{className:"stock-container",children:[Object(u.jsx)("label",{className:"todo-label",htmlFor:e.id,children:e.name}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"stock-price",children:e.priceInfo.priceCur}),Object(u.jsx)("br",{}),Object(u.jsxs)("span",{className:"stock-price",style:{color:x>0?"green":"red"},children:[x>0?"+":"",Number(x).toFixed(2)," (",Number(v).toFixed(2),"%)",Object(u.jsx)("br",{})]})]})]})}),Object(u.jsxs)("div",{className:"btn-group",style:{display:p?"none":""},children:[Object(u.jsxs)("button",{type:"button",className:"btn",onClick:function(){return r(!0)},ref:O,children:["Edit ",Object(u.jsxs)("span",{className:"visually-hidden",children:[e.name," "]})]}),Object(u.jsxs)("button",{type:"button",className:"btn btn__danger",onClick:function(){e.deleteTask(e.id)},children:["Delete ",Object(u.jsx)("span",{className:"visually-hidden",children:e.name})]})]})]});return Object(u.jsx)("li",{className:"todo",children:a?g:k})}function b(e){var t=Object(n.useState)(""),c=Object(l.a)(t,2),a=c[0],r=c[1];return Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.addTask(a),r("")},children:[Object(u.jsx)("h2",{className:"label-wrapper",children:Object(u.jsx)("label",{htmlFor:"new-todo-input",className:"label__lg",children:"What stock do you want to add?"})}),Object(u.jsx)("input",{type:"text",placeholder:"Input a new stock",id:"new-todo-input",required:!0,className:"input input__lg",name:"text",autoComplete:"off",value:a,onChange:function(e){r(e.target.value)}}),Object(u.jsx)("button",{type:"submit",className:"btn btn__primary btn__lg",children:"Add"})]})}var j=c(19),p=c(26),f=c(45),m="c1433cn48v6s4a2e39q0",O="https://finnhub.io/api/v1/quote?symbol=";var h=function(e){var t=Object(n.useState)(e.stocks),c=Object(l.a)(t,2),a=c[0],r=c[1],s=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current}(a.length),h=Object(n.useState)(f().format("LT")),x=Object(l.a)(h,2),v=x[0],g=x[1],k=Object(n.useState)(!1),N=Object(l.a)(k,2);N[0],N[1];var I=Object(n.useRef)(null),y=a.map((function(e){return Object(u.jsx)(d,{id:e.id,name:e.name,deleteTask:S,editTask:w,priceInfo:e.priceInfo},e.id)})),C=1!==y.length?"stocks":"stock",P="".concat(y.length," ").concat(C);function T(){var e=a.map((function(e){return{apiUrl:"".concat(O).concat(e.name,"&token=").concat(m)}})).map((function(e){return p(e.apiUrl)}));p.all(e).then(p.spread((function(){for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];var n=a.map((function(e,c){return Object(i.a)(Object(i.a)({},e),{},{priceInfo:{pricePre:t[c].data.pc,priceCur:t[c].data.c}})}));r(n),g(f().format("LT"))}))).catch((function(e){console.log(e)}))}function S(e){var t=a.filter((function(t){return e!==t.id}));r(t)}function w(e,t){var c=encodeURI(t.toUpperCase().trim());if(a.map((function(e){return e.name})).includes(c))alert(c+" is already on the watch list");else{var n=Object(o.a)(a);a.forEach((function(s,o){if(e===s.id){s.name;var i={pricePre:s.priceInfo.pricePre,priceCur:s.priceInfo.priceCur};p.get("".concat(O).concat(c,"&token=").concat(m)).then((function(e){0!==e.data.t?(c,i={pricePre:e.data.pc,priceCur:e.data.c},n[o].name=c,n[o].priceInfo=i,console.log(a),console.log(n),r(n),console.log(i)):alert(t+" does not exist")})).catch((function(e){console.log(e)}))}}))}}return Object(n.useEffect)((function(){y.length-s===-1&&I.current.focus()}),[y.length,s]),function(e,t){var c=Object(n.useRef)();Object(n.useEffect)((function(){c.current=e})),Object(n.useEffect)((function(){T();var e=setInterval((function(){c.current()}),t);return function(){return clearInterval(e)}}),[t])}((function(){T()}),6e4),Object(u.jsxs)("div",{className:"todoapp stack-large",children:[Object(u.jsx)("h1",{children:"Stock Prices"}),Object(u.jsxs)("p",{style:{textAlign:"center"},children:["Update at ",v]}),Object(u.jsx)(b,{addTask:function(e){var t=encodeURI(e.toUpperCase().trim());a.map((function(e){return e.name})).includes(t)?alert(t+" is already on the watch list"):p.get("".concat(O).concat(t,"&token=").concat(m)).then((function(e){var c={id:"todo-"+Object(j.a)(),name:t,priceInfo:{pricePre:e.data.pc,priceCur:e.data.c}};0!==e.data.t?r([].concat(Object(o.a)(a),[c])):alert("The "+t+" is not a stock symbol")})).catch((function(e){console.log(e)}))}}),Object(u.jsx)("div",{className:"filters btn-group stack-exception"}),Object(u.jsx)("h2",{id:"list-heading",tabIndex:"-1",ref:I,children:P}),Object(u.jsx)("ul",{role:"list",className:"todo-list stack-large stack-exception","aria-labelledby":"list-heading",children:y})]})};r.a.render(Object(u.jsx)(h,{stocks:[{id:"todo-0",name:"STM",priceInfo:{pricePre:0,priceCur:0}},{id:"todo-1",name:"TXN",priceInfo:{pricePre:0,priceCur:0}},{id:"todo-2",name:"AMD",priceInfo:{pricePre:0,priceCur:0}},{id:"todo-3",name:"MSFT",priceInfo:{pricePre:0,priceCur:0}},{id:"todo-4",name:"INTC",priceInfo:{pricePre:0,priceCur:0}}]}),document.getElementById("root")),s()}},[[49,1,2]]]);
//# sourceMappingURL=main.d696a8bd.chunk.js.map