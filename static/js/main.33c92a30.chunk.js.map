{"version":3,"sources":["reportWebVitals.js","components/Form/Form.jsx","components/Stock/Stock.jsx","App.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","Form","props","useState","name","setName","onSubmit","e","preventDefault","addStock","className","htmlFor","type","placeholder","id","required","autoComplete","value","onChange","target","Stock","isEditing","setEditing","newName","setNewName","hidden","setHidden","priceChange","priceInfo","priceCur","pricePre","priceChangePercentage","Math","abs","editingTemplate","editStock","onClick","viewTemplate","onMouseOver","onMouseOut","style","color","Number","toFixed","visibility","deleteStock","axios","require","moment","apiKey","preUrl","App","stocks","setStocks","format","timeUpdate","SetTime","stockList","map","stock","stocksNoun","length","headingText","fetchData","promises","apiUrl","api","all","spread","responses","newStocks","index","data","pc","c","catch","errors","console","log","remainingStocks","filter","encodeURI","toUpperCase","trim","includes","alert","editedStocks","forEach","get","response","t","callback","delay","savedCallback","useRef","useEffect","current","setInterval","clearInterval","useInterval","textAlign","newStock","nanoid","tabIndex","role","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.33c92a30.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React, {useState} from \"react\";\r\n\r\nexport default function Form(props){\r\n    const [name, setName] = useState('');\r\n    function handleSubmit(e){\r\n      e.preventDefault();\r\n      props.addStock(name);\r\n      setName(\"\");\r\n    }\r\n    function handleChange(e){\r\n      setName(e.target.value);\r\n    }\r\n    return (<form onSubmit={handleSubmit}>\r\n        <h2 className=\"label-wrapper\"><label htmlFor=\"new-stock-input\" className=\"label__lg\">What stock do you want to add?</label></h2>\r\n      \r\n      <input type=\"text\" placeholder=\"Input a new stock\" id=\"new-stock-input\" required className=\"input input__lg\" name=\"text\" autoComplete=\"off\" value={name} onChange={handleChange} />\r\n      <button type=\"submit\" className=\"btn btn__primary btn__lg\">Add</button>\r\n      </form>);  \r\n};","import React, {useEffect ,useRef, useState} from \"react\";\r\n\r\nexport default function Stock(props){\r\n    const [isEditing, setEditing] = useState(false);\r\n    const [newName, setNewName] = useState('');\r\n    const [hidden, setHidden] = useState(true);\r\n\r\n    const priceChange = props.priceInfo.priceCur-props.priceInfo.pricePre;\r\n    const priceChangePercentage = Math.abs(priceChange / props.priceInfo.pricePre * 100);\r\n\r\n\r\n    function mouserOver(){\r\n        setHidden(false);\r\n    }\r\n    function mouseOut(){\r\n        setHidden(true);\r\n    }\r\n    \r\n    const editingTemplate = (\r\n        <form className=\"stack-small\" onSubmit={(e)=>{e.preventDefault(); props.editStock(props.id, newName); setNewName(\"\"); setEditing(false)}}>\r\n            <div className=\"form-group\">\r\n                <label className=\"stock-label\" htmlFor={props.id}>\r\n                    Input a stock name:\r\n                </label>\r\n                <input id={props.id} className=\"stock-text\" type=\"text\" value={newName} onChange={e=>{setNewName(e.target.value);}}\r\n                />\r\n            </div>\r\n            <div className=\"btn-group\">\r\n                <button type=\"button\" className=\"btn stock-cancel\" onClick={()=>{setEditing(false);}}>\r\n                    Cancel\r\n                    <span className=\"visually-hidden\">Input a stock name:</span>\r\n                </button>\r\n                <button type=\"submit\" className=\"btn btn__primary stock-edit\">\r\n                    Save\r\n                    <span className=\"visually-hidden\">Input a stock name:</span>\r\n                </button>\r\n            </div>\r\n        </form>\r\n    );\r\n    const viewTemplate=(\r\n    <div className=\"stack-small\" onMouseOver={mouserOver} onMouseOut={mouseOut}>\r\n    <div className=\"c-cb\"  >       \r\n        <div className=\"stock-container\">\r\n            <label className=\"stock-label\" htmlFor={props.id}>\r\n                {props.name}\r\n            </label> \r\n            <div>      \r\n                <span className=\"stock-price\">{props.priceInfo.priceCur}</span><br/>\r\n                <span className=\"stock-price\" style={{color:priceChange>0?\"green\":\"red\"}}>{priceChange>0?\"+\":\"\"}{Number(priceChange).toFixed(2)} ({Number(priceChangePercentage).toFixed(2)}%)<br/></span>\r\n            </div>  \r\n        </div>\r\n    </div>\r\n    <div className=\"btn-group\"  style={{visibility: hidden?\"hidden\":\"visible\"}}>\r\n        <button type=\"button\" className=\"btn\" onClick={()=>setEditing(true)} >\r\n            Edit <span className=\"visually-hidden\">{props.name} </span>\r\n        </button>\r\n        <button type=\"button\" className=\"btn btn__danger\" onClick={()=>{props.deleteStock(props.id)}}>\r\n            Delete <span className=\"visually-hidden\">{props.name}</span>\r\n        </button>\r\n        \r\n    </div>\r\n    <hr />\r\n    </div>\r\n);\r\n\r\n\r\n    return(\r\n        <li className=\"stock\">{isEditing? editingTemplate: viewTemplate}</li>\r\n    );\r\n}","import Form from \"./components/Form/Form\";\r\nimport React, {useState, useRef, useEffect} from \"react\";\r\nimport {nanoid} from \"nanoid\";\r\nimport Stock from \"./components/Stock/Stock\";\r\n\r\nconst axios = require('axios');\r\nconst moment = require(\"moment-timezone\");\r\nconst apiKey = \"c1433cn48v6s4a2e39q0\";\r\nconst preUrl = \"https://finnhub.io/api/v1/quote?symbol=\";\r\n\r\nfunction App(props) {\r\n  const [stocks, setStocks] = useState(props.stocks);\r\n  const [timeUpdate, SetTime] = useState(moment().format('LT'));\r\n\r\n\r\n  const stockList = stocks.map(stock => (<Stock id={stock.id} name={stock.name} key={stock.id}  deleteStock={deleteStock} editStock={editStock}\r\n  priceInfo={stock.priceInfo}/>));\r\n  const stocksNoun = stockList.length!==1? 'stocks' : 'stock';\r\n  const headingText = `${stockList.length} ${stocksNoun}`;\r\n  \r\n\r\n  useInterval(()=>{fetchData();}, 60000)\r\n\r\n  function fetchData() {\r\n    let apiList = stocks.map(stock=>({apiUrl:`${preUrl}${stock.name}&token=${apiKey}`}));\r\n    let promises = apiList.map(api=>axios(api.apiUrl));\r\n    // console.log(stocks);\r\n\r\n    axios.all(promises).then(axios.spread((...responses)=>{\r\n      const newStocks = stocks.map((stock, index)=>{\r\n        return {...stock, priceInfo:{'pricePre':responses[index].data.pc, 'priceCur':responses[index].data.c}};\r\n      });\r\n      setStocks(newStocks);\r\n      SetTime(moment().format('LT'));\r\n      \r\n    })).catch(errors => {\r\n      console.log(errors);\r\n    });\r\n  } \r\n\r\n  function useInterval(callback, delay) {\r\n    const savedCallback = useRef();\r\n  \r\n    useEffect(() => {\r\n      savedCallback.current = callback;\r\n    });\r\n  \r\n    useEffect(() => {\r\n      function tick() {\r\n        savedCallback.current();\r\n      }\r\n      fetchData();\r\n\r\n      let id = setInterval(tick, delay);\r\n      return () => clearInterval(id);\r\n    }, [delay]);\r\n  }\r\n\r\n  function deleteStock(id){\r\n    const remainingStocks = stocks.filter(stock=> id !== stock.id);\r\n    setStocks(remainingStocks);\r\n\r\n  }\r\n\r\n  function editStock(id, name){\r\n    let newName = encodeURI(name.toUpperCase().trim());\r\n\r\n    if (stocks.map(stock=>stock.name).includes(newName))\r\n    {\r\n      alert(newName + \" is already on the watch list\");\r\n      return;\r\n    }\r\n\r\n    const editedStocks=[...stocks];\r\n\r\n    stocks.forEach((stock, index) => {\r\n      if (id=== stock.id)\r\n      {\r\n        let tmpName = stock.name;\r\n        let priceInfo={'pricePre':stock.priceInfo.pricePre, 'priceCur':stock.priceInfo.priceCur};\r\n        axios.get(`${preUrl}${newName}&token=${apiKey}`)\r\n        .then((response)=>{\r\n          if (response.data.t!==0){      \r\n            tmpName = newName;\r\n            priceInfo={'pricePre':response.data.pc, 'priceCur':response.data.c};\r\n            editedStocks[index].name = newName;\r\n            editedStocks[index].priceInfo = priceInfo;\r\n            console.log(stocks);\r\n            console.log(editedStocks);\r\n            setStocks(editedStocks);\r\n            console.log(priceInfo);\r\n          }\r\n          else{\r\n            alert(name + \" does not exist\");\r\n          }\r\n        })\r\n        .catch(errors=>{console.log(errors);});\r\n\r\n      }\r\n    });   \r\n  }\r\n\r\n  function addStock(name){\r\n    let newName = encodeURI(name.toUpperCase().trim());\r\n    if (stocks.map(stock=>stock.name).includes(newName))\r\n    {\r\n      alert(newName + \" is already on the watch list\");\r\n      return;\r\n    }\r\n    axios.get(`${preUrl}${newName}&token=${apiKey}`)\r\n    .then(response=>{\r\n      \r\n      const newStock = {id:\"stock-\" + nanoid(), name:newName, priceInfo:{'pricePre':response.data.pc, 'priceCur':response.data.c}};\r\n      \r\n      if (response.data.t!==0){      \r\n        setStocks([...stocks, newStock]);\r\n      }\r\n      else{\r\n        alert(\"The \"+newName + \" is not a stock symbol\");\r\n      }\r\n    })\r\n    .catch(errors=>{console.log(errors)});  \r\n  }\r\n \r\n\r\n  return (\r\n    <div className=\"stockapp stack-large\">\r\n      <h1>Stock Prices</h1>\r\n        <p style={{textAlign:\"center\"}}>Update at {timeUpdate}</p>\r\n        <Form addStock={addStock}/>\r\n      <div className=\"filters btn-group stack-exception\">\r\n      \r\n      </div>\r\n      <h2 id=\"list-heading\" tabIndex=\"-1\" >{headingText}</h2>\r\n      <ul role=\"list\" className=\"stock-list stack-large stack-exception\">\r\n        {stockList}        \r\n      </ul>\r\n    </div> \r\n\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport App from \"./App\"\r\nconst DATA=[{id:\"stock-0\", name:\"STM\", priceInfo:{'pricePre':0, 'priceCur':0}},\r\n{id: \"stock-1\", name:\"TXN\", priceInfo:{'pricePre':0, 'priceCur':0}},\r\n{id: \"stock-2\", name:\"AMD\", priceInfo:{'pricePre':0, 'priceCur':0}},\r\n{id: \"stock-3\", name:\"MSFT\", priceInfo:{'pricePre':0, 'priceCur':0}},\r\n{id: \"stock-4\", name:\"INTC\", priceInfo:{'pricePre':0, 'priceCur':0}},\r\n];\r\n\r\n\r\nReactDOM.render(\r\n\r\n    <App stocks={DATA}/>,\r\n  \r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}