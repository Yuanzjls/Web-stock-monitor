(this["webpackJsonpweek2-stock"]=this["webpackJsonpweek2-stock"]||[]).push([[0],{24:function(e,t,c){},49:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(18),s=c.n(a),r=(c(24),function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,50)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))}),i=c(7),o=c(8),l=c(3),u=c(0);function d(e){var t=Object(n.useState)(""),c=Object(l.a)(t,2),a=c[0],s=c[1];return Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.addStock(a),s("")},children:[Object(u.jsx)("h2",{className:"label-wrapper",children:Object(u.jsx)("label",{htmlFor:"new-stock-input",className:"label__lg",children:"What stock do you want to add?"})}),Object(u.jsx)("input",{type:"text",placeholder:"Input a new stock",id:"new-stock-input",required:!0,className:"input input__lg",name:"text",autoComplete:"off",value:a,onChange:function(e){s(e.target.value)}}),Object(u.jsx)("button",{type:"submit",className:"btn btn__primary btn__lg",children:"Add"})]})}var p=c(19);function b(e){var t=Object(n.useState)(!1),c=Object(l.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(""),i=Object(l.a)(r,2),o=i[0],d=i[1],p=Object(n.useState)(!0),b=Object(l.a)(p,2),j=b[0],m=b[1],f=e.priceInfo.priceCur-e.priceInfo.pricePre,h=Math.abs(f/e.priceInfo.pricePre*100);var O=Object(u.jsxs)("form",{className:"stack-small",onSubmit:function(t){t.preventDefault(),e.editStock(e.id,o),d(""),s(!1)},children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{className:"stock-label",htmlFor:e.id,children:"Input a stock name:"}),Object(u.jsx)("input",{id:e.id,className:"stock-text",type:"text",value:o,onChange:function(e){d(e.target.value)}})]}),Object(u.jsxs)("div",{className:"btn-group",children:[Object(u.jsxs)("button",{type:"button",className:"btn stock-cancel",onClick:function(){s(!1)},children:["Cancel",Object(u.jsx)("span",{className:"visually-hidden",children:"Input a stock name:"})]}),Object(u.jsxs)("button",{type:"submit",className:"btn btn__primary stock-edit",children:["Save",Object(u.jsx)("span",{className:"visually-hidden",children:"Input a stock name:"})]})]})]}),k=Object(u.jsxs)("div",{className:"stack-small",onMouseOver:function(){m(!1)},onMouseOut:function(){m(!0)},children:[Object(u.jsx)("div",{className:"c-cb",children:Object(u.jsxs)("div",{className:"stock-container",children:[Object(u.jsx)("label",{className:"stock-label",htmlFor:e.id,children:e.name}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"stock-price",children:e.priceInfo.priceCur}),Object(u.jsx)("br",{}),Object(u.jsxs)("span",{className:"stock-price",style:{color:f>0?"green":"red"},children:[f>0?"+":"",Number(f).toFixed(2)," (",Number(h).toFixed(2),"%)",Object(u.jsx)("br",{})]})]})]})}),Object(u.jsxs)("div",{className:"btn-group",style:{visibility:j?"hidden":"visible"},children:[Object(u.jsxs)("button",{type:"button",className:"btn",onClick:function(){return s(!0)},children:["Edit ",Object(u.jsxs)("span",{className:"visually-hidden",children:[e.name," "]})]}),Object(u.jsxs)("button",{type:"button",className:"btn btn__danger",onClick:function(){e.deleteStock(e.id)},children:["Delete ",Object(u.jsx)("span",{className:"visually-hidden",children:e.name})]})]}),Object(u.jsx)("hr",{})]});return Object(u.jsx)("li",{className:"stock",children:a?O:k})}var j=c(26),m=c(45),f="c1433cn48v6s4a2e39q0",h="https://finnhub.io/api/v1/quote?symbol=";var O=function(e){var t=Object(n.useState)(e.stocks),c=Object(l.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(m().format("LT")),O=Object(l.a)(r,2),k=O[0],x=O[1],v=a.map((function(e){return Object(u.jsx)(b,{id:e.id,name:e.name,deleteStock:C,editStock:y,priceInfo:e.priceInfo},e.id)})),g=1!==v.length?"stocks":"stock",N="".concat(v.length," ").concat(g);function I(){var e=a.map((function(e){return{apiUrl:"".concat(h).concat(e.name,"&token=").concat(f)}})).map((function(e){return j(e.apiUrl)}));j.all(e).then(j.spread((function(){for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];var n=a.map((function(e,c){return Object(o.a)(Object(o.a)({},e),{},{priceInfo:{pricePre:t[c].data.pc,priceCur:t[c].data.c}})}));s(n),x(m().format("LT"))}))).catch((function(e){console.log(e)}))}function C(e){var t=a.filter((function(t){return e!==t.id}));s(t)}function y(e,t){var c=encodeURI(t.toUpperCase().trim());if(a.map((function(e){return e.name})).includes(c))alert(c+" is already on the watch list");else{var n=Object(i.a)(a);a.forEach((function(r,i){if(e===r.id){r.name;var o={pricePre:r.priceInfo.pricePre,priceCur:r.priceInfo.priceCur};j.get("".concat(h).concat(c,"&token=").concat(f)).then((function(e){0!==e.data.t?(c,o={pricePre:e.data.pc,priceCur:e.data.c},n[i].name=c,n[i].priceInfo=o,console.log(a),console.log(n),s(n),console.log(o)):alert(t+" does not exist")})).catch((function(e){console.log(e)}))}}))}}return function(e,t){var c=Object(n.useRef)();Object(n.useEffect)((function(){c.current=e})),Object(n.useEffect)((function(){I();var e=setInterval((function(){c.current()}),t);return function(){return clearInterval(e)}}),[t])}((function(){I()}),6e4),Object(u.jsxs)("div",{className:"stockapp stack-large",children:[Object(u.jsx)("h1",{children:"Stock Prices"}),Object(u.jsxs)("p",{style:{textAlign:"center"},children:["Update at ",k]}),Object(u.jsx)(d,{addStock:function(e){var t=encodeURI(e.toUpperCase().trim());a.map((function(e){return e.name})).includes(t)?alert(t+" is already on the watch list"):j.get("".concat(h).concat(t,"&token=").concat(f)).then((function(e){var c={id:"stock-"+Object(p.a)(),name:t,priceInfo:{pricePre:e.data.pc,priceCur:e.data.c}};0!==e.data.t?s([].concat(Object(i.a)(a),[c])):alert("The "+t+" is not a stock symbol")})).catch((function(e){console.log(e)}))}}),Object(u.jsx)("div",{className:"filters btn-group stack-exception"}),Object(u.jsx)("h2",{id:"list-heading",tabIndex:"-1",children:N}),Object(u.jsx)("ul",{role:"list",className:"stock-list stack-large stack-exception",children:v})]})};s.a.render(Object(u.jsx)(O,{stocks:[{id:"stock-0",name:"STM",priceInfo:{pricePre:0,priceCur:0}},{id:"stock-1",name:"TXN",priceInfo:{pricePre:0,priceCur:0}},{id:"stock-2",name:"AMD",priceInfo:{pricePre:0,priceCur:0}},{id:"stock-3",name:"MSFT",priceInfo:{pricePre:0,priceCur:0}},{id:"stock-4",name:"INTC",priceInfo:{pricePre:0,priceCur:0}}]}),document.getElementById("root")),r()}},[[49,1,2]]]);
//# sourceMappingURL=main.33c92a30.chunk.js.map